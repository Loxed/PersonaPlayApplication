@startuml
!define primary_key(x) <b><color:#b8861b><&key></color> x</b>
!define foreign_key(x) <color:#aaaaaa><&key></color> x
!define column(x) <color:#efefef><&media-record></color> x
!define table(x) entity x << (T, white) >>


table(Users) {

    primary_key(id) : VARCHAR 32
    column(username) : VARCHAR 20
    column(email) : VARCHAR 50
    column(content_filter) : BOOLEAN
    foreign_key(role_id) : REFERENCES Role(id)
    foreign_key(icons_id) : REFERENCES Icons(id)
}



table(UsersStatus) {
    primary_key(id) : INTEGER
    primary_key(users_id) : INTEGER
    primary_key(media_id) : VARCHAR 9
    column(users_rating) : INTEGER
    column(manual_completion_status) : INTEGER
}

table(Medias) {
    primary_key(id) : INTEGER
    column(imdb_id) : VARCHAR 9
    column(title) : VARCHAR 100
    column(year) : VARCHAR 4
    column(genre) : VARCHAR 50
    column(director) : VARCHAR 50
    column(actors) : VARCHAR 50
    column(plot) : VARCHAR 1000
    column(visible) : BOOLEAN
    column(available) : BOOLEAN
    column(media_location) : VARCHAR 255
}

table(Rating){
    primary_key(id) : INTEGER
    column(rating) : INTEGER
    column(rating_count) : INTEGER
}

Medias ||-u-o{ Rating

UsersStatus }|--|| Medias
UsersStatus }|-l-|| Users

table(Status) {
    primary_key(id) : INTEGER
    column(completion_time): INTEGER
    column(progress) : INTEGER
    column(max_progress) : INTEGER
}

table(MediaStatus) {
    primary_key(id) : INTEGER
    primary_key(media_id) : INTEGER
    primary_key(status_id) : INTEGER
}

MediaStatus }|-r-|| Medias
MediaStatus }|-l-|| Status

table(Icons) {
    primary_key(id) : INTEGER
    column(icon) : INTEGER
    column(variant) : INTEGER
}

Users ||-u-|| Icons


table(Role) {
    primary_key(id) : INTEGER
    column(name) : VARCHAR 20
}

Users }o-u-|| Role

table(Watchlist) {
    primary_key(id) : INTEGER
    column(type) : VARCHAR 20
    foreign_key(Users_id) : REFERENCES Users(id)
    foreign_key(media_status_id) : REFERENCES MediasStatus(id)
    foreign_key(tag_id) : REFERENCES Tag(id)
}

table(Tag){
    primary_key(id) : INTEGER
    column(name) : VARCHAR 20
}

Users ||-d-|| Watchlist

Watchlist }o--o{ MediasStatus

Watchlist }o-u-o{ Tag


@enduml